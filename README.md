# Pyembroider
Телеграм-бот, создающий схему для вышивки по картинке

## Основной функционал

1) Получение схемы для вышивания из картинки формата jpg/png
2) Учет допустимых цветов и цветов, имеющихся у пользователя
3) Поиск выгодных предложений для покупки недостающих ниток на маркетплейсах
4) Подсчет количества необходимого материала (длина нитей)
5) Подсчет примерного размера картинки (optional)
*) TBD

## Способ работы

### Взаимодействие с ботом
  1) Составление базы данных доступных цветов ниток и их длины
  2) Загрузка картинки
  3) Указание размера канвы и уровня детализации (примерного кол-ва цветов)
  4) Указание коэффициента допустимости покупки новых ниток. В зависимости от него бот будет решать, какие цвета брать из имеющихся, а какие предлагать купить.
  5) Обработка картинки и получение схемы.
### Обработка картинки
  1) Разбиение картинки на квадратики нужного размера (в зависимости от детализации и канвы)
  2) Нахождение усредненного цвета для каждого квадратика
  3) Сопоставление цветов с базой данных 	Gamma с учетом имеющихся и коэффициента допустимости покупок
  4) Нумерация цветов и создание схемы
  5) Подсчет длины ниток и запуск парсера цен для отсутствующих цветов
### Парсер цен
  1) В базе данных храним цены на нитки разных цветов на разных маркетплейсах (Ozon, Wildberries, Я.Маркет, Теплостановский рынок (очный парсер))
  2) Парсинг цен на нитки и предложение пользователю наиболее выгодных вариантов со ссылками.

## Роли
  1) Копнев Максим - парсер маркетплейсов и база данных GAMMA с ценами
  2) Сиволоцкий Алексей - телеграмм-бот + очный парсинг (с фотоотчетом) + проверка качества схем для вышивки (с фотоотчетом) + фотоотчет (с фотоотчетом)
  3) Дятлова Мария - обработка картинки и база данных имеющихся цветов

**Standartenführer:** Kopnev Maksim - @Oladiy2504


## КТ-2

### Что сделано
1) Парсинг таблицы Gamma цветов и основные классы sqlalchemy для неё и таблиц пользователей
2) Обработка изображения без учета наличия ниток у пользователя.
3) Бот, который умеет получать размеры холста у пользователя и выдавать pdf-файл со схемой для шитья
4) Подробное тестирование обработки изображений, тестирование баз данных (gamma, пользовательскую пока не имеет смысла тестировать - она будет изменена), небольшое тестирование бота

### Что предстоит сделать
1) Общую базу данных для хранения цветов в наличии у всех пользователей бота
2) Учет наличия цветов у пользователя при создании схемы
3) Больше функционала бота и параметров, которые можно задавать (пока что многие из них только в коде)
4) Парсинг магазинов и выдача в pdf примерной цены на недостающие нитки

Видеоотчет: https://disk.yandex.ru/i/Z_Iz1y6z7Jn3wg

Не бейте за кривые штуки моментами, честно еле уложились в дедлайн( Но проект обещает быть очень классным к защите!
